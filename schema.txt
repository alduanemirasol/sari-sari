product_categories:
- id
- name                  'Candy'

expense_categories:
- id
- name                  'Kumpra' (Kumpra, Tubig, Kuryente, Transportasyon, Mga Bayronon, Uban Pa')

payment_types:
- id
- name                  'cash' (cash, credit)

units:
- id
- name                  'liter', 'ml', 'kg', 'piece'
- abbreviation          'L', 'ml', 'kg', 'pc'

unit_conversions:
- id
- product_id  FK to products.id (nullable)
- from_unit_id          FK to units.id
- to_unit_id            FK to units.id
- factor                multiply to convert, e.g., 1L → 1000ml, factor = 1000

products:
- id
- name                  'Snow Bear'
- unit_id               FK to units.id (base/default unit for stock tracking)
- product_category_id   FK to product_categories.id
- stock_quantity        '200' (always tracked in the product's base unit_id)
- image_url             'local_db/products/snow-bear.jpg'
- is_active             true (soft delete instead of destroying records)

product_pricing:
- id
- product_id            FK to products.id
- retail_price          '1.00'
- wholesale_price       '0.65'
- wholesale_min_qty     '100'
- effective_date        '02-19-25' (track price changes over time; use latest row as current price)

product_units:
- id
- product_id            FK to products.id
- unit_id               FK to units.id (the alternative selling unit, e.g., liter, pack)
- retail_price          '45.00' (price per this unit)
- wholesale_price       '35.00'
- wholesale_min_qty     '5' (min qty of this unit to qualify for wholesale price)
- label                 'Per Liter (L)' (optional display label shown in POS unit picker)

  NOTE: A product can have zero or more product_units rows. When at least one exists,
  the POS shows a unit picker modal so the cashier selects which unit to sell.
  Pricing in sale_items is resolved from product_units first; falls back to
  product_pricing if no matching product_units row exists for that unit.
  The product's base unit (products.unit_id) is always shown as an option using
  product_pricing; product_units rows add additional sellable units on top.

bundles:
- id
- bundle_name           '3 Candies for 5 pesos'
- bundle_price          '5.00'
- is_active             true (soft delete; old sale_items can still reference retired bundles)

bundle_items:
- id
- bundle_id             FK to bundles.id
- product_id            FK to products.id
- unit_id               FK to units.id
- quantity

stock_batches:
- id
- product_id            FK to products.id
- unit_id               FK to units.id
- quantity_received     '500'
- expiration_date       '03-01-26' (null if product has no expiry)
- created_at            '02-19-25 8:00AM'
- notes                 'Delivery from Supplier A'
- quantity_received
- quantity_base

stock_logs:
- id
- product_id            FK to products.id
- unit_id               FK to units.id
- stock_batch_id        FK to stock_batches.id (null if not batch-related, e.g. damage/adjustment)
- change_qty            '-10' (negative = stock removed, positive = restocked)
- reason                'damaged' (restocked, sold, damaged, expired, adjustment)
- notes                 'Wet from leaking roof'
- created_at            '02-19-25 8:00AM'

customers:
- id
- first_name
- middle_name
- last_name
- contact_number
- municipality
- barangay
- street
- credit_limit          '1000.00' (default; app checks sum of unpaid balances before allowing new credit sale)

sales:
- id
- customer_id           FK to customers.id (null if walk-in/cash)
- payment_type_id       FK to payment_types.id
- sale_date             '02-19-25 7:45AM'

sale_items:
- id
- sale_id               FK to sales.id
- product_id            FK to products.id (null if bundle sale)
- bundle_id             FK to bundles.id (null if product sale)
- unit_id               FK to units.id (the unit the customer actually bought in; from product_units or products.unit_id)
- quantity_sold         '1'
- unit_price            '1.00' (snapshotted at time of sale; retail or wholesale price, or bundle_price / bundle qty)
- total_price           '1.00' (quantity_sold × unit_price; stored for query convenience)
- sale_type             'retail' (retail, wholesale, bundle)

sale_bundle_items:
- id
- sale_item_id          FK to sale_items.id
- bundle_item_id        FK to bundle_items.id
- product_id            FK to products.id
- unit_id               FK to units.id
- quantity_deducted

credit_transactions:
- id
- customer_id           FK to customers.id
- sale_id               FK to sales.id
- amount_owed           '25.00' (total credit amount for this sale; fixed, never updated)
- due_date              '03-01-26'
- created_at            '02-19-25'

credit_payments:
- id
- credit_transaction_id FK to credit_transactions.id
- amount_paid           '10.00'
- paid_at               '02-25-25 3:00PM'
- notes                 'Paid half in cash'

expenses:
- id
- expense_category_id   FK to expense_categories.id
- amount                '250.00'
- notes                 'Bought stock from supplier'
- image_url             'local_db/expenses/kumpra.jpg'
- created_at            '02-19-25 8:00AM'
